const BZ2API=function(){"use strict";const e="http://battlezone99mp.webdev.rebellion.co.uk/lobbyServer",o="https://gamelistassets.iondriver.com/bzcc",s=["https://corsproxy.io/?","https://api.codetabs.com/v1/proxy?quest=","https://api.allorigins.win/raw?url="],a="1325933293",r={vsr4pool:{pools:8,loose:245,author:"ExE",size:2048,baseToBase:736},vsrjocrystalst:{pools:7,loose:250,author:"blue_banana",size:1216,baseToBase:1024},vsr310:{pools:7,loose:170,author:"Vearidons",size:1024,baseToBase:1024},vsrabundance:{pools:9,loose:340,author:"NA",size:1024,baseToBase:0},vsramino:{pools:7,loose:180,author:"{bac}appel",size:1024,baseToBase:843},stancientvsr:{pools:7,loose:240,author:"{bac}appel",size:1024,baseToBase:1153},staztecvsr:{pools:7,loose:180,author:"{bac}MalevolencE",size:640,baseToBase:1172},stancientposts:{pools:7,loose:320,author:"Mortarion",size:1024,baseToBase:1236},vsrabuse:{pools:7,loose:220,author:"Vearidons",size:1024,baseToBase:1032},vsrauslt:{pools:7,loose:205,author:"Vearidons",size:1024,baseToBase:1024},stbarrenvsr:{pools:7,loose:240,author:"{bac}appel",size:1024,baseToBase:953},stbowlvsr:{pools:7,loose:200,author:"{bac}appel",size:1024,baseToBase:1121},beyond:{pools:7,loose:200,author:"F9bomber",size:2048,baseToBase:803},stbolt:{pools:3,loose:120,author:"Feared_1",size:512,baseToBase:724},stbadlands:{pools:7,loose:190,author:"{bac}Oppressor",size:512,baseToBase:826},chill:{pools:7,loose:0,author:"Stock",size:2048,baseToBase:1014},vsrcanyons:{pools:8,loose:310,author:"Feared_1",size:2048,baseToBase:1876},vsrcncrt:{pools:7,loose:290,author:"Mortarion",size:1024,baseToBase:785},curiosityvsr:{pools:6,loose:300,author:"{bac}Cyber",size:512,baseToBase:749},zstcliff:{pools:7,loose:390,author:"ExE",size:2048,baseToBase:1225},vsrconsc:{pools:7,loose:230,author:"Vearidons",size:1024,baseToBase:862},vsrcrater:{pools:7,loose:200,author:"TimeVirus",size:1024,baseToBase:895},cpcauldron:{pools:8,loose:-1,author:"BZ2CP",size:1280,baseToBase:1152},vsrcracked:{pools:7,loose:240,author:"Gravey",size:2048,baseToBase:1274},vsrcasiusv2:{pools:7,loose:270,author:"ExE",size:1024,baseToBase:1261},stdeduxvsr:{pools:7,loose:260,author:"{bac}appel",size:1024,baseToBase:896},vsrdomain:{pools:7,loose:280,author:"blue_banana",size:1408,baseToBase:1296},vsrdc:{pools:6,loose:200,author:"Laguna",size:1024,baseToBase:1069},vsrdpark:{pools:7,loose:180,author:"Vearidons",size:1024,baseToBase:870},vsrdream:{pools:7,loose:185,author:"Vearidons",size:1024,baseToBase:834},duskvsr:{pools:7,loose:-1,author:"Aegeis",size:2048,baseToBase:0},vsrechelon:{pools:7,loose:160,author:"ExE",size:512,baseToBase:890},vsreuropa:{pools:7,loose:210,author:"{bac}MalevolencE",size:1024,baseToBase:975},vsreuronig:{pools:7,loose:210,author:"{bac}MalevolencE",size:1024,baseToBase:975},stvsrexcav:{pools:7,loose:240,author:"Mortarion",size:2048,baseToBase:1136},vsrequinox:{pools:8,loose:335,author:"{bac}Oppressor",size:1024,baseToBase:933},vsregypt:{pools:7,loose:190,author:"{bac}Oppressor",size:2048,baseToBase:931},vsrebola:{pools:7,loose:200,author:"Vearidons",size:1024,baseToBase:996},vsrfisle:{pools:7,loose:220,author:"Vearidons",size:896,baseToBase:1042},vsrforgot:{pools:7,loose:170,author:"Vearidons",size:1024,baseToBase:1208},vsrf12c:{pools:7,loose:240,author:"Vearidons",size:1024,baseToBase:1024},vsrflooded:{pools:7,loose:230,author:"Gravey",size:2048,baseToBase:1409},vsrfinday:{pools:7,loose:210,author:"spAce",size:1024,baseToBase:1055},vsrgarden:{pools:7,loose:260,author:"{bac}appel",size:1024,baseToBase:1067},vsrgoldensun:{pools:7,loose:200,author:"BZ2CP",size:2048,baseToBase:1184},stgizavsr:{pools:8,loose:250,author:"{bac}appel",size:1024,baseToBase:928},hilo:{pools:6,loose:-1,author:"Stock",size:512,baseToBase:1109},stbluesvsr:{pools:7,loose:280,author:"{bac}appel",size:1024,baseToBase:1179},vsrdhisle:{pools:7,loose:195,author:"Angelwing",size:2048,baseToBase:1185},havenvsr:{pools:8,loose:280,author:"{bac}appel",size:1024,baseToBase:841},vsrbighilo:{pools:7,loose:235,author:"{bac}appel",size:1024,baseToBase:1267},shound:{pools:6,loose:305,author:"F9bomber",size:256,baseToBase:780},vsrhubris:{pools:6,loose:430,author:"Gravey",size:720,baseToBase:897},heatedbzcc:{pools:5,loose:-1,author:"Aegeis",size:1024,baseToBase:0},vsriceage:{pools:7,loose:200,author:"ExE",size:1280,baseToBase:1229},stvsriraq:{pools:7,loose:255,author:"Feared_1",size:1024,baseToBase:1160},vsrinsula:{pools:7,loose:285,author:"{bac}MalevolencE",size:1280,baseToBase:857},vsrv8:{pools:7,loose:260,author:"Vearidons",size:1280,baseToBase:792},vsrimpact2:{pools:7,loose:-1,author:"Gravey",size:2048,baseToBase:1237},icecoldbzcc:{pools:8,loose:-1,author:"Aegeis",size:2048,baseToBase:0},vsrjade:{pools:7,loose:250,author:"{bac}MalevolencE",size:1024,baseToBase:1082},vsrknwthy:{pools:7,loose:200,author:"Vearidons",size:1280,baseToBase:707},vsrlunar:{pools:7,loose:195,author:"{bac}MalevolencE",size:1280,baseToBase:1188},vsrlunix:{pools:7,loose:250,author:"Vearidons",size:640,baseToBase:1050},"rjx-mars":{pools:6,loose:-1,author:"NA",size:1280,baseToBase:951},stmayhem:{pools:7,loose:250,author:"{bac}appel",size:1024,baseToBase:1192},stmesavsr:{pools:7,loose:280,author:"{bac}appel",size:1024,baseToBase:1103},stmagmavsr:{pools:6,loose:250,author:"{bac}Cyber",size:512,baseToBase:561},vsrmardenwarfare:{pools:6,loose:210,author:"blue_banana",size:1152,baseToBase:0},vsrmojave:{pools:7,loose:175,author:"{bac}MalevolencE",size:1280,baseToBase:1088},vsrmortwasteland:{pools:7,loose:290,author:"Mortarion",size:2048,baseToBase:996},vsrmexican:{pools:7,loose:190,author:"Vearidons",size:1024,baseToBase:1012},mntnpass:{pools:7,loose:320,author:"BZ2CP",size:1280,baseToBase:1120},vsrmoonshrd:{pools:7,loose:110,author:"{uscm}DarkFox",size:1024,baseToBase:775},mtntopbzcc:{pools:7,loose:-1,author:"Aegeis",size:1024,baseToBase:0},stmurkybzcc:{pools:6,loose:-1,author:"Aegeis",size:2048,baseToBase:0},vsrmidwars:{pools:6,loose:-1,author:"ExE",size:1024,baseToBase:1131},vsrmiredon:{pools:5,loose:220,author:"ExE",size:640,baseToBase:838},vsrnomnld:{pools:7,loose:-1,author:"Angelwing",size:2048,baseToBase:723},vsrnigeria:{pools:7,loose:200,author:"Vearidons",size:896,baseToBase:771},vsroverlook:{pools:8,loose:225,author:"Feared_1",size:2048,baseToBase:1280},vsrogg:{pools:7,loose:260,author:"Vearidons",size:1024,baseToBase:1073},vsroldboy:{pools:7,loose:190,author:"NA",size:1024,baseToBase:960},vsroxide:{pools:7,loose:280,author:"TimeVirus",size:1024,baseToBase:1315},cpoutposts:{pools:6,loose:-1,author:"BZ2CP",size:2048,baseToBase:836},vsroasis:{pools:7,loose:220,author:"Gravey",size:2048,baseToBase:1216},stphoenixvsr:{pools:7,loose:220,author:"{bac}appel",size:1024,baseToBase:1089},stpitbull:{pools:7,loose:0,author:"{bac}appel",size:1024,baseToBase:768},zprodigyv2:{pools:8,loose:-1,author:"{bac}MalevolencE",size:640,baseToBase:1222},vsrpstrgle:{pools:7,loose:265,author:"NA",size:1024,baseToBase:448},vsrpitfall:{pools:7,loose:160,author:"Vearidons",size:1024,baseToBase:842},vsrplaza:{pools:7,loose:390,author:"TimeVirus",size:1280,baseToBase:896},vsrplus:{pools:7,loose:380,author:"ExE",size:1024,baseToBase:906},vsrquarry2:{pools:7,loose:270,author:"Vearidons",size:1280,baseToBase:1042},stquagmirevsr:{pools:7,loose:200,author:"{bac}appel",size:1024,baseToBase:1027},stredslopevsr:{pools:7,loose:255,author:"{bac}appel",size:1024,baseToBase:916},streflexvsr:{pools:7,loose:240,author:"{bac}appel",size:1024,baseToBase:1180},strendonvsr:{pools:8,loose:190,author:"{bac}appel",size:1024,baseToBase:992},stridges:{pools:6,loose:220,author:"{bac}appel",size:1024,baseToBase:1108},vsrredbluff:{pools:7,loose:270,author:"TimeVirus",size:1024,baseToBase:1732},vsrrevo:{pools:7,loose:260,author:"Mad-Dog",size:512,baseToBase:669},vsrravine:{pools:7,loose:250,author:"{bac}MalevolencE",size:2048,baseToBase:1505},vsrremnant:{pools:7,loose:160,author:"{bac}MalevolencE",size:640,baseToBase:1001},vsrroyal:{pools:7,loose:140,author:"spAce",size:512,baseToBase:759},vsrragnor:{pools:7,loose:230,author:"Vearidons",size:1024,baseToBase:1090},vsrrapemas:{pools:7,loose:270,author:"Vearidons",size:1024,baseToBase:962},vsrrectal:{pools:7,loose:170,author:"Vearidons",size:896,baseToBase:730},starena:{pools:7,loose:220,author:"{bac}appel",size:1024,baseToBase:862},stsinister:{pools:7,loose:230,author:"Feared_1",size:1152,baseToBase:1016},vsr6way:{pools:6,loose:425,author:"Laguna",size:2048,baseToBase:832},vsrsahara:{pools:7,loose:200,author:"{bac}MalevolencE",size:1280,baseToBase:1242},vsrsatart:{pools:7,loose:220,author:"Vearidons",size:1024,baseToBase:771},vsrscammed:{pools:7,loose:180,author:"Vearidons",size:1024,baseToBase:1132},vsrscioncent:{pools:7,loose:270,author:"ExE",size:1280,baseToBase:1152},vsrlunast:{pools:7,loose:180,author:"blue_banana",size:1184,baseToBase:896},vsrstack:{pools:7,loose:260,author:"Vearidons",size:1024,baseToBase:896},vsrswgas:{pools:6,loose:120,author:"Vearidons",size:896,baseToBase:746},vsrlanes:{pools:7,loose:-1,author:"TimeVirus",size:1280,baseToBase:1222},stonevsr:{pools:7,loose:-1,author:"Aegeis",size:2048,baseToBase:0},vsrsnowcentral:{pools:7,loose:270,author:"ExE",size:1280,baseToBase:1024},strock:{pools:7,loose:-1,author:"Stock",size:512,baseToBase:288},sttempestvsr:{pools:6,loose:285,author:"{bac}appel",size:1024,baseToBase:1182},vsrterron:{pools:7,loose:280,author:"{bac}appel",size:1024,baseToBase:1088},sttrenchvsr:{pools:7,loose:220,author:"{bac}appel",size:1024,baseToBase:1093},vsrsttitan:{pools:7,loose:200,author:"Blade",size:2048,baseToBase:973},sttrailvsr:{pools:7,loose:310,author:"Death.System",size:2048,baseToBase:1449},vsrthewar:{pools:7,loose:220,author:"Vearidons",size:1024,baseToBase:758},vsrthrob:{pools:7,loose:165,author:"Vearidons",size:1024,baseToBase:960},vsrtrapped:{pools:7,loose:270,author:"Vearidons",size:1024,baseToBase:1090},vsrbridgest:{pools:7,loose:250,author:"blue_banana",size:1024,baseToBase:1088},vsrterrace:{pools:7,loose:140,author:"TimeVirus",size:1024,baseToBase:768},vsrtransfer:{pools:7,loose:0,author:"Gravey",size:512,baseToBase:996},vsrtwinpeaks:{pools:7,loose:280,author:"ExE",size:1024,baseToBase:1020},vsrtwohills:{pools:7,loose:270,author:"ExE",size:640,baseToBase:1109},vsruxbridge:{pools:7,loose:200,author:"{bac}MalevolencE",size:512,baseToBase:728},vsrvort:{pools:7,loose:250,author:"{LoC}StormFront",size:640,baseToBase:830},vsrvegan:{pools:7,loose:190,author:"Vearidons",size:1024,baseToBase:771},vsrwales:{pools:7,loose:235,author:"{bac}MalevolencE",size:896,baseToBase:1441},vsrwout:{pools:7,loose:355,author:"Feared_1",size:2048,baseToBase:980},wintervalley:{pools:7,loose:205,author:"Feared_1",size:640,baseToBase:705},vsrphazon:{pools:8,loose:-1,author:"Gravey",size:1024,baseToBase:1152},vsrrift2:{pools:7,loose:0,author:"Gravey",size:1024,baseToBase:1875},vsrtrinity:{pools:7,loose:300,author:"{LoC}StormFront",size:2048,baseToBase:1200}},t={UNKNOWN:0,OPEN_WAITING:1,CLOSED_WAITING:2,OPEN_PLAYING:3,CLOSED_PLAYING:4,EXITING:5},l={NONE:0,FULL_CONE:1,ADDRESS_RESTRICTED:2,PORT_RESTRICTED:3,SYMMETRIC:4,UNKNOWN:5,DETECTION_IN_PROGRESS:6,SUPPORTS_UPNP:7},i={[l.NONE]:"None",[l.FULL_CONE]:"Full Cone",[l.ADDRESS_RESTRICTED]:"Address Restricted",[l.PORT_RESTRICTED]:"Port Restricted",[l.SYMMETRIC]:"Symmetric",[l.UNKNOWN]:"Unknown",[l.DETECTION_IN_PROGRESS]:"Detecting...",[l.SUPPORTS_UPNP]:"UPnP"},n={ALL:0,DEATHMATCH:1,STRATEGY:2},p={UNKNOWN:0,DM:1,TEAM_DM:2,KOTH:3,TEAM_KOTH:4,CTF:5,TEAM_CTF:6,LOOT:7,TEAM_LOOT:8,RACE:9,TEAM_RACE:10,STRAT:11,TEAM_STRAT:12,MPI:13,GAMEMODE_MAX:14},m={[p.UNKNOWN]:"Unknown",[p.DM]:"Deathmatch",[p.TEAM_DM]:"Team Deathmatch",[p.KOTH]:"King of the Hill",[p.TEAM_KOTH]:"Team King of the Hill",[p.CTF]:"Capture the Flag",[p.TEAM_CTF]:"Team Capture the Flag",[p.LOOT]:"Loot",[p.TEAM_LOOT]:"Team Loot",[p.RACE]:"Race",[p.TEAM_RACE]:"Team Race",[p.STRAT]:"Free for All",[p.TEAM_STRAT]:"Team Strategy",[p.MPI]:"MPI"},u=[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376];function c(e){if(!e)return"";try{const o=atob(e),s=new Uint8Array(o.length);for(let e=0;e<o.length;e++)s[e]=o.charCodeAt(e);return function(e){let o="";for(let s=0;s<e.length;s++){const a=e[s];if(0===a)break;o+=a>=128&&a<=159?String.fromCharCode(u[a-128]):String.fromCharCode(a)}return o}(s).trim()}catch(o){return console.warn("Failed to decode Base64 string:",e,o),e}}function T(e){if(!e)return null;let o=BigInt(0);for(let s=0;s<e.length;s++){const a="@123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".indexOf(e[s]);a>=0&&(o|=BigInt(a)<<BigInt(6*s))}return o}function h(e){if(!e)return null;try{return(BigInt(e)&BigInt("0x00ffffffffffffff")).toString()}catch(o){return e}}function d(e){if(1===e.l||1===e.k)return null;const o=M(e.mm);if(0===o.length)return null;const s=c(e.n),a=o.join(";"),r=e.g||"",t=["N",s.length.toString(),s,a.length.toString(),a,r,"0"].join(",")+",";return"steam://rungame/624970/76561198955218468/-connect-mp%20"+(l=t,Array.from(l).map(e=>e.charCodeAt(0).toString(16).padStart(2,"0")).join(""));var l}function b(e){return e?`https://steamcommunity.com/profiles/${e}/`:null}function v(e){return e?`https://www.gog.com/u/${e}`:null}function g(e){return e&&"0"!==e?`https://steamcommunity.com/sharedfiles/filedetails/?id=${e}`:null}function B(e,o=[]){const s=o.some(e=>e.score&&0!==e.score||e.kills&&0!==e.kills||e.deaths&&0!==e.deaths);let a,r;switch(e){case t.UNKNOWN:a="Unknown",r="unknown";break;case t.OPEN_WAITING:case t.CLOSED_WAITING:s?(a="InGame",r="playing"):(a="PreGame",r=e===t.OPEN_WAITING?"waiting":"full");break;case t.OPEN_PLAYING:case t.CLOSED_PLAYING:a="InGame",r=e===t.OPEN_PLAYING?"playing":"full";break;case t.EXITING:a="PostGame",r="exiting";break;default:a="Unknown",r="unknown"}return{state:a,stateDetail:r,serverInfoMode:e,hasOpenSlots:e===t.OPEN_WAITING||e===t.OPEN_PLAYING}}function f(e){return{id:e,name:i[e]||`Unknown (${e})`,canDirectConnect:e===l.NONE||e===l.SUPPORTS_UPNP,isSymmetric:e===l.SYMMETRIC}}function z(e,o){const s={gameType:null,gameTypeName:null,gameMode:null,gameModeName:null,isTeamGame:!1,respawn:"One",vehicleOnly:!1,rawGameType:e,rawGameSubType:o};if(e===n.DEATHMATCH){if(s.gameType="DM",s.gameTypeName="Deathmatch",null!=o){const e=o%p.GAMEMODE_MAX,a=Math.floor(o/p.GAMEMODE_MAX),r=255&a;switch(256&a?s.respawn="Race":512&a&&(s.respawn="Any"),s.isTeamGame=e%2==0&&e>=2&&e<=10,r){case 0:s.gameMode=s.isTeamGame?"TEAM_DM":"DM",s.gameModeName=s.isTeamGame?"Team Deathmatch":"Deathmatch";break;case 1:s.gameMode=s.isTeamGame?"TEAM_KOTH":"KOTH",s.gameModeName=s.isTeamGame?"Team King of the Hill":"King of the Hill";break;case 2:s.gameMode=s.isTeamGame?"TEAM_CTF":"CTF",s.gameModeName=s.isTeamGame?"Team Capture the Flag":"Capture the Flag";break;case 3:s.gameMode=s.isTeamGame?"TEAM_LOOT":"LOOT",s.gameModeName=s.isTeamGame?"Team Loot":"Loot";break;case 5:s.gameMode=s.isTeamGame?"TEAM_RACE":"RACE",s.gameModeName=s.isTeamGame?"Team Race":"Race";break;case 6:s.gameMode=s.isTeamGame?"TEAM_RACE":"RACE",s.gameModeName=s.isTeamGame?"Team Race":"Race",s.vehicleOnly=!0;break;case 7:s.gameMode=s.isTeamGame?"TEAM_DM":"DM",s.gameModeName=s.isTeamGame?"Team Deathmatch":"Deathmatch",s.vehicleOnly=!0;break;default:s.gameMode="DM",s.gameModeName="Deathmatch"}}}else if(e===n.STRATEGY){if(s.gameType="STRAT",s.gameTypeName="Strategy",null!=o){switch(o%p.GAMEMODE_MAX){case p.STRAT:s.gameMode="FFA",s.gameModeName="Free for All",s.isTeamGame=!1;break;case p.TEAM_STRAT:s.gameMode="STRAT",s.gameModeName="Team Strategy",s.isTeamGame=!0;break;case p.MPI:s.gameMode="MPI",s.gameModeName="MPI",s.isTeamGame=!0;break;default:s.gameMode="STRAT",s.gameModeName="Strategy"}}}else 0===e&&(s.gameType="ALL",s.gameTypeName="All");return s}function M(e){return e?e.split(";").filter(e=>e.length>0):[]}function E(e){return e.map(e=>({id:e,name:"0"===e?"Stock":null,workshopUrl:g(e)}))}function A(e){return 255===e?{unlimited:!0,minutes:null,maxedOut:!0}:{unlimited:!1,minutes:e,maxedOut:!1}}function S(e,o=0,s=!1,a=!1,r=null){const t={name:c(e.n),rawId:e.i,steamId:null,gogId:null,platform:null,profileUrl:null,kills:e.k??null,deaths:e.d??null,score:e.s??null,teamSlot:e.t??null,team:null,isTeamLeader:!1,isCommander:!1,teamIndex:null,isHost:0===o,isHidden:!1};if(e.i){const o=e.i[0],s=e.i.substring(1);if("S"===o)t.steamId=s,t.platform="Steam",t.profileUrl=b(s);else if("G"===o){const e=h(s);t.gogId=e,t.gogIdRaw=s,t.platform="GOG",t.profileUrl=v(e)}}return null!==t.teamSlot&&255!==t.teamSlot||(t.isHidden=!0),null!==t.teamSlot&&255!==t.teamSlot&&(s&&!a?t.teamSlot>=1&&t.teamSlot<=5?(t.team=1,t.teamIndex=t.teamSlot-1,t.isTeamLeader=1===t.teamSlot):t.teamSlot>=6&&t.teamSlot<=10&&(t.team=2,t.teamIndex=t.teamSlot-6,t.isTeamLeader=6===t.teamSlot):a&&(t.team=1,t.teamIndex=t.teamSlot-1,t.isTeamLeader=1===t.teamSlot)),"STRAT"!==r&&"MPI"!==r&&"TEAM_STRAT"!==r||(t.isCommander=t.isTeamLeader),t}function y(e){const o=z(e.gt,e.gtd),s="MPI"===o.gameMode,r=(e.pl||[]).map((e,a)=>S(e,a,o.isTeamGame,s,o.gameMode)),t=B(e.si,r),l=f(e.t),i=A(e.gtm),n=M(e.mm),p=E(n),m=T(e.g),u=d(e),h=r.filter(e=>e.isCommander).map(e=>e.name),b=r.filter(e=>e.isHidden).map(e=>e.name),v=n.includes(a);return{id:e.g,guid:m?m.toString(16).padStart(16,"0"):null,name:c(e.n),version:e.v,...o,gameBalance:v?"VSR":null,gameBalanceName:v?"Vet Strategy Recycler Variant":null,mapFile:e.m,mapUrl:e.mu||null,players:r,playerCount:r.length,maxPlayers:e.pm,commanders:h,hiddenPlayers:b,mods:p,primaryMod:n[0]||"0",modHash:e.d,isStock:0===n.length||1===n.length&&"0"===n[0],...t,isLocked:1===e.l,hasPassword:1===e.k,motd:e.h||null,nat:l,steamJoinUrl:u,tps:e.tps,maxPing:e.pgm,worstPingObserved:e.pg,gameTimeMinutes:e.gtm,timeElapsedMinutes:i.maxedOut?">255":e.gtm,timeLimitMinutes:e.ti||null,killLimit:e.ki||null,_raw:e}}const N=new Map;async function I(e,a="0"){if(!e)return null;const r=`${a}:${e}`;if(N.has(r))return N.get(r);const t=`${o}/getdata.php?map=${encodeURIComponent(e)}&mod=${encodeURIComponent(a)}`;try{const o=await fetch(t);if(o.ok){const s=w(await o.json(),e);return N.set(r,s),s}}catch(o){for(const o of s)try{const s=o+encodeURIComponent(t),a=await fetch(s);if(a.ok){const o=w(await a.json(),e);return N.set(r,o),o}}catch(e){}}return N.set(r,null),null}function w(e,s){return e?{name:e.title||null,description:e.description||null,imageUrl:e.image?`${o}/${e.image}`:null,mapFile:s,teamNames:{team1:e.netVars?.svar1||null,team2:e.netVars?.svar2||null},netVars:e.netVars||null,mods:e.mods||null}:null}async function _(e){const o=new Map;for(const s of e){const e=`${s.primaryMod}:${s.mapFile}`;!o.has(e)&&s.mapFile&&o.set(e,{mapFile:s.mapFile,modId:s.primaryMod||"0"})}const s=Array.from(o.values()).map(({mapFile:e,modId:o})=>I(e,o));await Promise.all(s);for(const o of e){const e=`${o.primaryMod}:${o.mapFile}`,s=N.get(e);if(s){if(o.mapName=s.name,o.mapDescription=s.description,o.mapImageUrl=s.imageUrl,o.teamNames=s.teamNames,s.mods)for(const e of o.mods)s.mods[e.id]&&!e.name&&(e.name=s.mods[e.id].name||s.mods[e.id].workshop_name||null)}else o.mapName=null,o.mapDescription=null,o.mapImageUrl=null,o.teamNames={team1:null,team2:null}}}function O(e,o){const s={};if(Array.isArray(e))for(const o of e)o.file&&(s[o.file]={pools:o.pools,loose:o.loose,author:o.author,size:o.size,baseToBase:o.baseToBase});return"replace"===o?s:"merge"===o?{...r,...s}:r}function R(e,o){for(const s of e){const e=o[s.mapFile];e?(s.vsrPools=e.pools,s.vsrLoose=e.loose,s.vsrAuthor=e.author,s.vsrMapSize=e.size,s.vsrBaseToBase=e.baseToBase):(s.vsrPools=null,s.vsrLoose=null,s.vsrAuthor=null,s.vsrMapSize=null,s.vsrBaseToBase=null)}}async function C(o={}){const{proxyUrl:a,apiUrl:r=e,bustCache:t=!0}=o,l=t?function(e){const o=e.includes("?")?"&":"?";return`${e}${o}_cb=${Date.now()}`}(r):r;if(a){const e=a+encodeURIComponent(l),o=await fetch(e);if(!o.ok)throw new Error(`HTTP ${o.status}`);return o.json()}try{const e=await fetch(l);if(!e.ok)throw new Error(`HTTP ${e.status}`);return e.json()}catch(e){console.warn("Direct fetch failed, trying CORS proxies...",e.message);for(const e of s)try{const o=e+encodeURIComponent(l);console.log("Trying proxy:",e);const s=await fetch(o);if(!s.ok)continue;const a=await s.json();return console.log("Success with proxy:",e),a}catch(o){console.warn("Proxy failed:",e,o.message)}throw new Error("All fetch attempts failed. CORS may be blocking requests.")}}function P(e){const o={},s={};for(const a of e){for(const e of a.players){const s=e.steamId||e.gogId;s&&!o[s]&&(o[s]={id:s,steamId:e.steamId,gogId:e.gogId,platform:e.platform,profileUrl:e.profileUrl})}for(const e of a.mods)s[e.id]||(s[e.id]={id:e.id,name:e.name,workshopUrl:e.workshopUrl})}return{players:o,mods:s}}return{fetchSessions:async function(e={}){const{enrichMaps:o=!1,enrichVsrMaps:s=!1,vsrMapData:a,vsrMapDataMode:t,...l}=e;if(void 0!==a&&void 0===t)throw new Error('vsrMapDataMode is required when vsrMapData is provided. Use "replace" or "merge".');if(void 0!==t&&"replace"!==t&&"merge"!==t)throw new Error('vsrMapDataMode must be "replace" or "merge".');const i=await C(l),n=(i.GET||[]).map(y);if(n.sort((e,o)=>e.id.localeCompare(o.id)),o)try{await _(n)}catch(e){console.warn("Map enrichment failed:",e.message)}if(s){R(n,a?O(a,t):r)}const p=P(n);return{sessions:n,timestamp:(new Date).toISOString(),rawResponse:i,dataCache:p,enrichedMaps:o,enrichedVsrMaps:s}},fetchRaw:C,parseSession:y,parsePlayer:S,buildDataCache:P,fetchMapData:I,enrichSessionsWithMapData:_,clearMapCache:function(){N.clear()},getVsrMapData:function(e,o=null){return e&&(o||r)[e]||null},enrichSessionsWithVsrData:R,buildVsrMapLookup:O,decodeBase64Name:c,decodeRakNetGuid:T,cleanGogId:h,parseGameTypeAndMode:z,parseSessionState:B,parseNATType:f,parseTimeLimit:A,parseModIds:M,enrichMods:E,buildSteamProfileUrl:b,buildGogProfileUrl:v,buildWorkshopUrl:g,buildSteamJoinUrl:d,ServerInfoMode:t,NATType:l,NATTypeNames:i,GameType:n,GameMode:p,GameModeNames:m,VSR_MOD_ID:a,VSR_MAP_DATA:r,DEFAULT_API_URL:e,MAP_API_BASE_URL:o,CORS_PROXIES:s}}();"undefined"!=typeof module&&module.exports&&(module.exports=BZ2API);